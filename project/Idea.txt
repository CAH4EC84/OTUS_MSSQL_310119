
Схема проекта - https://app.sqldbm.com/SQLServer/Share/8uWBeivPcCIxI-5eOLFiYEGFrngIE8md_DYjF4jNYw0

1) Данные для отчетов поступаю раз в сутки из OLTP БД
	Тут все понятно
2) Для генерации отчетов испульзуется исключительно средства MS SQL
	2.1) Есть список пользователь (reports.users) с определенной иерархией папок  (\\somePath\Julia ; \\somePath\Sergey etc)
		Есть базовая папка в который хранятся шаблоны отчетов (XML файлы) с описанием \ примерами сгенерированных отчетов.
		Список отчетов предустановлен, расширяем по мере разработки. Генерация через хранимые процедуры \ функции.
	
	2.2) Запрос на генерацию отчета от пользователя поступает в XML файле request.xml
		Пользователель копирует из шаблонной папки необходимый ему отчета, устанавливает требуемые параметры, дает ему новый ид.
		
	2.3) Планировщик заданий проверяет пользовательские папки по таймеру, если появилось новое задание :
		Регистрирует его в таблице Reports.usersReportsTask ([SP_readUserTask])
		Запускает генерацию выбранного отчета ([SP_executeUserTask])
		Выгружает софрмированный отчет ([SP_exportUserReport]).
		Каждый этап ставит пометку о ходе выполнения в поле (Reports.usersReportsTask.recState), ременную метку для последущей проверки быстродействия и оптимизации. Если на каком-то этапе просиходит ошибка она регистрируется в (Reports.usersReportsTask.errorMessage)
		
	2.3) Сформированный отчет выгружается через bcp в формате XML в директорию пользователя (.\complite).
		Файл именуется в соответсвии с правилом [Пользователь_ХранимаПроцедура_ИдОтчета.xml]

	Опционально 
		Уведомляем пользователя о готовности отчета. https://habr.com/ru/post/179819/
		
